<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      html {
    background-color: teal;
      }

      .calculator {
          margin: 0 auto;
          background-color: rgb(0, 43, 161);
          border-radius: 30px;
          border: solid 1px blue;
          width: 430px;
          min-width: 430px;
          min-height: fit-content;
      }

      #display {
          text-align: right;
          color: white;
          margin: 0 auto;
          line-height: 100px;
          height: 100px;
          width: 98%;
          font-size: 75px;
      }

      .row0 {
          border: solid 4px black;
          border-radius: 30px;
          padding: 10px;
      }

      button {
          transition-duration: 0.3s;
          border: none;
          margin: 2px;
          padding: 3px;
          border-radius: 30px;
          width: 100px;
          height: 100px;
          font-size: xx-large;
      }

      button:hover {
          background-color: crimson;
      }

      .number {
          background-color: turquoise;
      }

      .operation {
          background-color: cornflowerblue;
      }
    </style>
    <title>Document</title>
</head>
<body>
    <div class="container">
        <div class="calculator">
            <div class="row0">
                <div id="display"> </div>
            </div>
            <div class="row1">
                <button class="operation" value="clear">AC</button>
                <button class="operation" value="positiveNegative">+/-</button>
                <button class="operation" value="divide">/</button>
                <button class="operation" value="multiply">*</button>
            </div>
            <div class="row2">
                <button class="number" value="7">7</button>
                <button class="number" value="8">8</button>
                <button class="number" value="9">9</button>
                <button class="operation" value="subtract">-</button>
            </div>
            <div class="row3">
                <button class="number" value="4">4</button>
                <button class="number" value="5">5</button>
                <button class="number" value="6">6</button>
                <button class="operation" value="add">+</button>
            </div>
            <div class="row4">
                <button class="number" value="1">1</button>
                <button class="number" value="2">2</button>
                <button class="number" value="3">3</button>
                <button class="operation" value="equals">=</button>
            </div>
            <div class="row5">
                <button class="number" value="0">0</button>
                <button class="operation" value="decimal">.</button>
            </div>
        </div>
    </div>
    
    <script>
      let button = document.querySelectorAll("button");
      let onSwitch = true;
      let numA = '0';
      let numB = '0';
      let oldNum = '0';
      let workingOperator = '';
      let oldWorkingOperator = '';

      function add(a, b){
          return a + b;
      }

      function subtract(a, b){
          return a - b;
      }

      function multiply(a, b){
          return a * b;
      }

      function divide(a, b){
          if (b == 0){
              return "Sorry, we don't do that here."
          } else {
              return a / b;
          }
      }

      function multiDigit(workingNum, newNum){
          if (workingNum == '0') {
              return newNum;
          } else {
              return workingNum + '' + newNum;
          }
      }

      function display(number){
          let display = document.querySelector("#display")
          let num = number;
          display.firstChild.nodeValue = num;
      }

      function numbers(newNum){
          if (onSwitch == true){
              // Here we are working on the first part of the calculation. There is no operator yet.
              numA = multiDigit(numA, newNum);
              oldNum = '0';
              display(numA)
          } else {
              numB = multiDigit(numB, newNum);
              display(numB)
          }
      }

      function operate(firstNum, secondNum, operation){
          return this[operation](Number(firstNum), Number(secondNum));
      }

      function mathOperation(operator){
          if (onSwitch == true){
              if (oldNum == '0'){
                  onSwitch = false;
                  workingOperator = operator;
                  // Future Work: Highlight button
              } else {
                  onSwitch = false;
                  workingOperator = operator;
                  numA = oldNum;
                  // Future Work: Highlight button
              }
          }else {
              numA = (operate(numA, numB, workingOperator)).toString();
              oldNum = numA;
              numB = '0'
              workingOperator = operator;
              display(numA);
          }

      }

      function equals(){
          if (onSwitch == true){
          }else {
              numA = (operate(numA, numB, workingOperator)).toString();
              oldNum = numA;
              display(numA);
              numA = '0';
              numB = '0';
              workingOperator = '';
              onSwitch = true;
          }
      }

      function decimal(){
          if (onSwitch == true){
              // Working with numA
              if (numA.includes('.') == true){}
              else {
                  numA = numA + '' + '.';
                  display(numA);
              }
          }else{
              if (numB.includes('.') == true){}
              else {
                  numB = numB + '' + '.';
                  display(numB)
              }
          }
      }

      function isNeg(){
          // Future work, Fix this spaghetti code of doom!
          if (oldNum != '0'){
              numA = oldNum;
              if (onSwitch == true){
                  if (numA != 0 ){
                      if (numA.includes('-') == true) {
                          numA.replace('-', '');
                      } else {
                      numA = '-' + numA;
                  }
                  }
                  display(numA);
              }else{ 
                  if (numB != 0){
                      if (numB.includes('-') == true) {
                          numB.replace('-', '');
                      } else {
                          numB = '-' + numB;
                      }
                  }
                  display(numB);
              }
          }
          
      }

      function operatorSwitchBoard(operator){
          switch (operator){
              case 'add':
              case 'subtract':
              case 'multiply':
              case 'divide':
                  mathOperation(operator);
                  break;
              case 'equals':
                  equals();
                  break;
              case 'clear':
                  onSwitch = true;
                  numA = '0';
                  numB = '0';
                  oldNum = '0';
                  workingOperator = '';
                  oldWorkingOperator = '';
                  display(numA);
                  break; 
              case 'decimal':
                  decimal();
                  break;
              case 'positiveNegative':
                  isNeg();
                  break;
              default:
                  console.log("not functional");
          }
      }

      // Using forEach is like putting a "onClick" function onto every number button.
      button.forEach((btn) => {
          btn.addEventListener("click", (event) => {
              if (event.target.className == 'number'){
                  // Using Number() to grab the value and make it into... A NUMBER!!!
                  console.log(Number(event.target.value));
                  numbers(event.target.value)
              } else if (event.target.className == "operation"){
                  console.log(event.target.value);
                  operatorSwitchBoard(event.target.value);
              }
          })
      });

      display(numA);

    </script>
</body>
</html>